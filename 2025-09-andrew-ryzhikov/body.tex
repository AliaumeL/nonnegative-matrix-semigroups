\section{Introduction}

\paragraph*{Origin Story} This collaboration started by the study of a result
of \cite{BUHAKISTTA20} proven in the Appendix A of their ArXiv preprint, that
stated that any finite subgroup of $\GL{\Rat}$ is \kl(matrix){conjugate} to a
finite subgroup of $\GL{\Int}$. The question studied during the collaboration
was whether this result could be extended to: semigroups of matrices rather
than groups, and to the case of nonnegative rational matrices rather than
arbitrary rational matrices. 


\paragraph*{Motivation} The motivation for studying this result come from
different perspectives: on the one hand, a longstanding open problem in the
weigthed automata community is to be able to decide whether a given weighted
automaton over the rationals is equivalent to one over the nonnegative
rationals. The case of $\Rat$ versus $\Int$ is a toy case that is easily proven
to be decidable since every $\Rat$-weighted automaton can be converted into an
equivalent $\Int$-weighted automaton as long as the outputs of the automaton
belongs to $\Int$ \cite{BERE10}. On the other hand, the analogue statement
fails for $\Rat$ versus $\Rat_+$, and understanding the obstructions to this
statement in the case of finite (semi)groups of matrices is a first step
towards understanding the obstructions in the general case of weighted
automata.

A second motivation comes from the study of representations of finite groups
and semigroups in terms of matrices. The question of whether the expressive
power of these representation changes when one changes the underlying semiring
is a natural one that arises in this context. Note that for finite groups,
Cayley's theorem already shows that 0-1 matrices are sufficient to represent
any finite group, and the question becomes more interesting when one considers
the minimal dimension needed to represent a given group: does this dimension
change with the underlying semiring?



\section{Preliminaries}

Let us briefly recall some notations and definitions that will be used
throughout the report. We denote by $\Nat$, $\Int$, $\Rat$, $\Real$ and $\Comp$
the semirings/rings/fields of nonnegative integers, integers, rationals, reals
and complex numbers respectively. For a semiring $K$ and an integer $n \geq 1$,
we denote by $\Mat[n]{K}$ the set of $n\times n$ matrices with entries in $K$,
and by $\GL[n]{K}$ the group of invertible matrices in $\Mat[n]{K}$, that is,
matrices $M \in \Mat[n]{K}$ such that there exists $N \in \Mat[n]{K}$ with $MN
= NM = I_n$, where $I_n$ is the identity matrix. A \intro(matrix){representation}
of a semigroup (resp. group) $S$ over a semiring (resp. ring) $K$ is a
morphism of semigroups (resp. groups) $\rho \colon S \to \Mat[n]{K}$ (resp.
$\rho \colon S \to \GL[n]{K}$) for some integer $n \geq 1$. The integer $n$ is
called the \intro(matrix){dimension} of the representation.


Let $K$ be a semiring included in $\Rat$, and let $S, T$ be two semigroups of
$\Mat[n]{K}$. We say that $S$ and $T$ are \intro(matrix){conjugate} if there
exists an invertible matrix $P \in \GL[n]{\Rat}$ such that $P^{-1}SP = T$,
where $P^{-1}SP = \{P^{-1}MP \mid M \in S\}$. Note thet this defines an
isomorphism of semigroups between $S$ and $T$.


\subsection{Restating the previous result}

As a first step, we reprove the result of \cite{BUHAKISTTA20}, following
a remark of Nathan Lhote that the proof actually generalizes to 
finite semigroups of matrices.

\begin{theorem}\label{thm:finite-semigroup}
    Any finite semigroup of
    $\Mat[n]{\Rat}$ is \kl(matrix){conjugate} to 
    finite a semigroup of $\Mat[n]{\Int}$.
\end{theorem}
\begin{proof}
  Let $S \subseteq \Mat[n]{\Rat}$ be a finite semigroup. Our goal is to 
  construct a $\Int$-module $A$ and a faithful action of $S$ on $A$, so that 
  $S$ can be seen as a semigroup of $\Mat[n]{\Int}$.

  To that end, let us define 
  \begin{equation}
    A \defined \sum_{M \in S} M \Int^n \subseteq \Rat^n
    \quad .
  \end{equation}
  The set $A$ is the $\Int$-module generated by the rows of 
  the matrices $M \in S$, with the ability to multiply every element in 
  a row by a different integer.

  Let us briefly point out key properties of this set $A$:
  \begin{enumerate}
    \item $A$ is an $\Int$-module, as it is stable by addition and 
      multiplication by integers;
    \item $A$ is stable by the action of $S$, as for every $M, N \in S$, 
      we have $M A \subseteq A$;
    \item $\Int^n$ is included in $A$, as $I_n \in S$;
  \end{enumerate}

  Let us now argue that $A$ is a free $\Int$-module of rank $n$. Let $d$ be a
  nonnegative interger such that $dA \subseteq \Int^n$. Such an integer exists
  since $S$ is finite and contains only rational matrices. By standard
  arguments on free $\Int$-modules (also known as abelian groups),
  we conclude that there exists $k \leq n$ such that
  $A \simeq \Int^k$. Let us write $\gamma \colon A \to \Int^k$ for an
  isomorphism of $\Int$-modules. 
  Since $\Int^n \subseteq A$, we must have $k \geq n$, and thus $k = n$.


  Finally, let us define the action of $S$ on $\Int^n$ by
  \begin{equation}
    M \cdot v \defined \gamma(M \gamma^{-1}(v))
    \quad ,
  \end{equation}
  for every $M \in S$ and $v \in \Int^n$.

  This defines a (linear) action of $S$ on $\Int^n$, which corresponds to a
  representation of $S$ in $\Mat[n]{\Int}$. Furthermore,
  one can easily check that $\gamma$ can be transformed into a conjugacy matrix
  $P \defined (\gamma(e_1) \cdots \gamma(e_n))$, where $e_1, \ldots, e_n$ is the
  canonical basis of $\Int^n$. Because $\gamma$ is an isomorphism of
  $\Int$-modules, $P$ is invertible over $\Rat$, and for every $M \in S$,
  we have $P^{-1} M P \in \Mat[n]{\Int}$.
\end{proof}


\subsection{Possible extensions}

We are interested in solving the following conjectures:

\begin{conjecture}
  \label{conj:group-nonnegative}
  Any finite group of $\GL[n]{\Rat}$ is \kl(matrix){conjugate} to a finite group of
  $\GL[n]{\Int_+}$.
\end{conjecture}

\begin{conjecture}
  \label{conj:semigroup-nonnegative}
  Any finite semigroup of $\Mat[n]{\Rat_+}$ is \kl(matrix){conjugate} to a finite semigroup of
  $\Mat[n]{\Int_+}$.
\end{conjecture}

\section{Solving \cref{conj:group-nonnegative}}

\paragraph*{Failed attempts} Let us briefly mention 
why adapting the proof of \cref{thm:finite-semigroup} to
prove \cref{conj:group-nonnegative} does not straightforwardly work.
The main issue is that the notions of $\Int$-module and $\Int_+$-module
differ significantly.


\paragraph*{Full characterisation}
Nonnegativity of the matrices in the group $G$ is a very strong 
assumption, because inverses usually involve negative entries.
It is not difficult to see that a matrix $A$ with nonnegative 
rational entries has its inverse $A^{-1}$ also with nonnegative
rational entries if and only if $A$ is a weighted permutation matrix, 
that is: there exists a permutation $\sigma$ of $\{1, \ldots, n\}$ and
positive rational numbers $r_1, \ldots, r_n$ such that
\begin{equation}
  A_{i,j} = \begin{cases}
    r_i & \text{if } j = \sigma(i) \\
    0 & \text{otherwise}
  \end{cases}
  \quad .
\end{equation}

From this observation, one also gets a characterisation of invertible matrices
with nonnegative integer entries, that are \emph{exactly} permutation matrices.
Hence, solving \cref{conj:group-nonnegative} amounts to comparing finite groups
of weighted permutation matrices and finite groups of permutation matrices.
Here, finiteness plays a crucial role as the following lemma shows.

\begin{lemma}
  \label{lem:weighted-permutation}
  Let $G$ be a finite group of weighted permutation matrices in
  $\GL[n]{\Rat_+}$. Then, for every $j \in \{1, \ldots, n\}$, 
  there exists $r_j > 0$ such that
  for every $M \in G$, 
  $M_{i,j} \in \{0, r_j / r_i\}$.
\end{lemma}
\begin{proof}
  Let $i, j$ be two integers in $\{1, \ldots, n\}$, and assume towards a
  contradiction that there exists $M, N \in G$ such that $M_{i,j} \neq N_{i,j}$
  and both are non-zero. Then, for every integer $k \geq 1$, the matrix $M^k
  N^{-k}$ belongs to $G$ and satisfies that $(M^k N^{-k})_{i,j} =
  (M_{i,j}/N_{i,j})^k$. The latter equality holds because all matrices are
  weighted permutation matrices. Since $M_{i,j} \neq N_{i,j}$ and both are
  non-zero, the sequence $(M_{i,j}/N_{i,j})^k$ is infinite, and thus $G$ is
  infinite, which contradicts our assumption.

  In particular, we conclude that $M_{i,i} \in \{0, 1\}$ for every $M \in G$
  and every $i \in \{1, \ldots, n\}$.

  We define $r_1, \ldots, r_n$ inductively on $j$ as follows:
  \begin{itemize}
    \item If there exists $M \in G$ and $i \leq j$ such that $M_{i,j} \neq 0$,
      we let $r_j \defined M_{i,j} r_i$. Note that this definition does not depend on
      the choice of $M$ and $i$ by the first part of the proof.
    \item Otherwise, we let $r_j \defined 1$.
  \end{itemize}
  By construction, for every $M \in G$ and every $j \in \{1, \ldots, n\}$,
  we have $M_{i,j} \in \{0, r_j / r_i\}$.
\end{proof}

From \cref{lem:weighted-permutation}, we deduce that
every finite group of weighted permutation matrices is conjugate to a group
of permutation matrices, by a diagonal matrix $P$ whose diagonal entries are
the $r_j$'s of \cref{lem:weighted-permutation}. 

\begin{theorem}
  \label{thm:group-nonnegative}
  Any finite group of $\GL[n]{\Rat_+}$ is \kl(matrix){conjugate} to a finite group of
  $\GL[n]{\Int_+}$.
\end{theorem}
\begin{proof}
  Let $G$ be a finite group of $\GL[n]{\Rat_+}$.
  By \cref{lem:weighted-permutation}, there exists $r_1, \ldots, r_n > 0$ such that
  for every $M \in G$ and every $j \in \{1,
  \ldots, n\}$, we have $M_{i,j} \in \{0, r_j/r_i\}$.

  Let $P$ be the diagonal matrix with diagonal entries $r_1, \ldots, r_n$,
  which is invertible over $\Rat_+$.
  Let us prove that $P^{-1} G P$ is a group of permutation matrices.
  Let $M \in G$, and let $N = P M P^{-1}$.
  For every $i, j \in \{1, \ldots, n\}$, we have
  \begin{equation}
    N_{i,j} = (P^{-1} M P)_{i,j}
    = (P^{-1})_{i,i} M_{i,j} P_{j,j}
    = \frac{r_i}{r_j} M_{i,j} \in \{0, 1\}
    \quad .
  \end{equation}  
  This concludes the proof.
\end{proof}

\section{Future work}

We aim to solve \cref{conj:semigroup-nonnegative}, and generalise our study to
non-finite groups/semigroups of matrices to obtain decision procedures for the
expressiveness problem of semigroups of matrices: given a semigroup $S$ of
$\Mat[n]{\Rat}$ (resp. $\Mat[n]{\Rat_+}$), is $S$ conjugate to a semigroup of
$\Mat[n]{\Int}$ (resp. $\Mat[n]{\Int_+}$)?


\paragraph*{Relevant literature in the polynomial growth setting} There are
several works that study weighted automata with ``polynomial growth'' and
outputs in $\Nat$ or $\Int$. These works include the ones of \cite{KRRC13},
\cite{CDTL23}, and \cite{LOPEZ25}.


